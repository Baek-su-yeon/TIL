## 🚀 성능 이슈 분석 및 디버깅 결과 (2026-02-01)

### 1. 개요

최근 업데이트된 이미지 처리 로직(물리적 비트맵 복사 및 회전) 도입 이후, 앱의 전반적인 성능 저하 및 트래킹 중단 현상이 발생함. `Logcat` 분석 결과, 비효율적인 리소스 관리로 인해 시스템 가용 자원이 고갈되고 MediaPipe 엔진의 전제 조건이 파괴되는 것을 확인하였음.

### 2. 주요 결함 분석 (Smoke Test 결과)

#### ① 메모리 폭격 및 LOS GC 오버헤드 (MemoryCheck & GC)

* **현상**: `08:41:16`~`08:43:10` 구간 확인 결과, **초당 평균 15~20회의 비트맵(480x640) 생성**이 지속됨.
* **원인**: `createBitmap` 및 `toBitmap`을 통한 무분별한 메모리 할당으로 인해 대형 객체 영역인 **LOS(Large Object Space)**가 순식간에 점유됨.
* **결과**: 시스템이 메모리를 확보하기 위해 **초당 1회 이상의 강제 GC**를 수행하며, 이 과정에서 한 번에 약 **200ms~300ms의 시스템 정지(Stop-the-world)**가 발생함.
* **물증**: `NativeAlloc concurrent copying GC freed ... LOS objects` 로그가 반복적으로 확인됨.

#### ② UI 스레드 점유 및 7초 프리징 (Choreographer)

* **현상**: 특정 시점에서 **`Skipped 453 frames!`** 로그 기록됨.
* **분석**: 안드로이드 60fps 기준, 이는 약 **7.5초 동안 화면이 완전히 멈춘 상태**임을 의미함.
* **원인**: 비동기 리스너 내부에서 메인 스레드 전환 로직 없이 무거운 연산이 수행되거나, 극심한 GC 부하로 인해 UI 스레드가 작업 스케줄링에서 밀려남.
* **결과**: 발표자가 제스처를 취해도 화면이 갱신되지 않아 실시간 제어 불능 상태에 빠짐.

#### ③ MediaPipe 엔진 전제 조건 파괴 (Timestamp Reverse)

* **현상**: `GestureHelper` 및 `PoseHelper`에서 **`failed precondition: The received packets having a smaller timestamp than the processed timestamp`** 에러 지속 발생.
* **원인**: `fixedThreadPool(2)`를 사용하여 비트맵을 물리적으로 회전시키는 과정에서, 연산 속도 차이로 인해 **프레임 전달 순서가 뒤바뀜(Race Condition)**.
* **결과**: MediaPipe 엔진은 타임스탬프가 역전된 데이터 입력을 거부하고 분석을 중단함. **트래킹이 갑자기 멈추는 현상의 직접적인 원인**임.

#### ④ 시스템 차원의 앱 강제 종료 전조 (ActivityManager)

* **현상**: 시스템 로그에서 `ActivityManager: Killing ... packageinstaller/reminder` 등 주변 앱을 강제 종료하는 행위 포착.
* **분석**: 대상 앱이 메모리를 과도하게 점유하자, OS가 이를 살리기 위해 백그라운드 앱들을 정리하는 **'Low Memory Killer' 전조 현상**임. 방치 시 대상 앱 자체가 OOM(Out of Memory)으로 종료될 가능성 100%.